{% extends "layout.html" %}
{% block title %}Index{% endblock %}
{% block head %}
  {{ super() }}
{% endblock %}
{% block headline %}

{% endblock %}
{% block content %}
<div class="jumbotron pb-4">
    <form action="/qa/" method = "POST">

        <h1 class="display-4">SHunQA</h1>
        <p class="lead">Szeged Hungarian Question Answering vagyis Sonkaaaaa</p>
        <hr class="my-4">
        <div class="form-row">
            <div class="col-lg-10">
                <label for="question">Mi a kérdésed hozzám?</label>
                <input id="question" class="form-control" type="text" placeholder="Mikor építették a vízlépcsőket a Duna felső szakaszán?" name="query" value="{{query if query else ''}}" />
            </div>
            <div class="col-lg-2">
                <label for="size">Méret</label>
                <input id="size" class="form-control" type="text" placeholder="Mélység" name="size" value="{{size if size else '10'}}" />
            </div>
        </div>
        <div class="form-row mt-2">
            <div class="col-lg-12">
                <label for="elastic-table">Elastic tábla kiválasztás:</label>
                <select name="elastic" class="form-control" aria-label="Default select example" id="elastic-table">
                    {% if elastic == "milqa_w_lemma_w_official_context" %}
                    <option value="milqa_w_lemma_w_official_context" selected>MilQA</option>
                    <option value="word_war_2_wikidump">WW2 wikidump</option>
                    {% elif elastic == "word_war_2_wikidump" %}
                    <option value="milqa_w_lemma_w_official_context" >MilQA</option>
                    <option value="word_war_2_wikidump" selected>WW2 wikidump</option>
                    {% else %}
                    <option value="milqa_w_lemma_w_official_context" selected>MilQA</option>
                    <option value="word_war_2_wikidump">WW2 wikidump</option>
                    {% endif %}
                </select>
            </div>
        </div>
        <div class="form-row mt-2">
            <div class="col-lg-12">
                <label for="model_type-table">Modell kiválasztás:</label>
                <select name="model_type" class="form-control" aria-label="Default select example" id="model_type-table">
                    {% for model in config_variables %}
                        {% if model_type == model.visible_name %}
                             <option value={{ model.visible_name }} selected>{{ model.visible_name }}</option>
                        {% else %}
                            <option value={{ model.visible_name }}>{{ model.visible_name }}</option>
                        {% endif %}
                    {% endfor %}



{#                        <option value="huBERT rövid válaszos modell" selected>huBERT rövid válaszos modell</option>#}
{#                        <option value="huBERT rövid válaszos, nem megválaszolható modell">huBERT rövid válaszos, nem megválaszolható modell</option>#}
{#                        <option value="huBERT hosszú válaszos, nem megválaszolható modell">huBERT hosszú válaszos, nem megválaszolható modell</option>#}
{#                        <option value="RoBERTa rövid válaszos, nem megválaszolható modell">RoBERTa rövid válaszos, nem megválaszolható modell</option>#}
{#                        <option value="RoBERTa hosszú válaszos, nem megválaszolható modell">RoBERTa hosszú válaszos, nem megválaszolható modell</option>#}
{#                        #}
{#                    {% else %}#}
{#                        {% if model_type == "huBERT rövid válaszos, nem megválaszolható modell" %}#}
{#                            <option value="huBERT rövid válaszos modell">huBERT rövid válaszos modell</option>#}
{#                            <option value="huBERT rövid válaszos, nem megválaszolható modell" selected>huBERT rövid válaszos, nem megválaszolható modell</option>#}
{#                            <option value="huBERT hosszú válaszos, nem megválaszolható modell">huBERT hosszú válaszos, nem megválaszolható modell</option>#}
{#                            <option value="RoBERTa rövid válaszos, nem megválaszolható modell">RoBERTa rövid válaszos, nem megválaszolható modell</option>#}
{#                            <option value="RoBERTa hosszú válaszos, nem megválaszolható modell">RoBERTa hosszú válaszos, nem megválaszolható modell</option>#}
{#                        {% else %}#}
{#                            {% if model_type == "huBERT hosszú válaszos, nem megválaszolható modell" %}#}
{#                                <option value="huBERT rövid válaszos modell">huBERT rövid válaszos modell</option>#}
{#                                <option value="huBERT rövid válaszos, nem megválaszolható modell">huBERT rövid válaszos, nem megválaszolható modell</option>#}
{#                                <option value="huBERT hosszú válaszos, nem megválaszolható modell" selected>huBERT hosszú válaszos, nem megválaszolható modell</option>#}
{#                                <option value="RoBERTa rövid válaszos, nem megválaszolható modell">RoBERTa rövid válaszos, nem megválaszolható modell</option>#}
{#                                <option value="RoBERTa hosszú válaszos, nem megválaszolható modell">RoBERTa hosszú válaszos, nem megválaszolható modell</option>#}
{#                            {% else %}#}
{#                                {% if model_type == "RoBERTa rövid válaszos, nem megválaszolható modell" %}#}
{#                                    <option value="huBERT rövid válaszos modell">huBERT rövid válaszos modell</option>#}
{#                                    <option value="huBERT rövid válaszos, nem megválaszolható modell">huBERT rövid válaszos, nem megválaszolható modell</option>#}
{#                                    <option value="huBERT hosszú válaszos, nem megválaszolható modell">huBERT hosszú válaszos, nem megválaszolható modell</option>#}
{#                                    <option value="RoBERTa rövid válaszos, nem megválaszolható modell" selected>RoBERTa rövid válaszos, nem megválaszolható modell</option>#}
{#                                    <option value="RoBERTa hosszú válaszos, nem megválaszolható modell">RoBERTa hosszú válaszos, nem megválaszolható modell</option>#}
{#                                {% else %}#}
{#                                    {% if model_type == "RoBERTa hosszú válaszos, nem megválaszolható modell" %}#}
{#                                        <option value="huBERT rövid válaszos modell">huBERT rövid válaszos modell</option>#}
{#                                        <option value="huBERT rövid válaszos, nem megválaszolható modell">huBERT rövid válaszos, nem megválaszolható modell</option>#}
{#                                        <option value="huBERT hosszú válaszos, nem megválaszolható modell">huBERT hosszú válaszos, nem megválaszolható modell</option>#}
{#                                        <option value="RoBERTa rövid válaszos, nem megválaszolható modell">RoBERTa rövid válaszos, nem megválaszolható modell</option>#}
{#                                        <option value="RoBERTa hosszú válaszos, nem megválaszolható modell" selected>RoBERTa hosszú válaszos, nem megválaszolható modell</option>#}
{#                                    {% else %}#}
{#                                        <option value="huBERT rövid válaszos modell" selected>huBERT rövid válaszos modell</option>#}
{#                                        <option value="huBERT rövid válaszos, nem megválaszolható modell">huBERT rövid válaszos, nem megválaszolható modell</option>#}
{#                                        <option value="huBERT hosszú válaszos, nem megválaszolható modell">huBERT hosszú válaszos, nem megválaszolható modell</option>#}
{#                                        <option value="RoBERTa rövid válaszos, nem megválaszolható modell">RoBERTa rövid válaszos, nem megválaszolható modell</option>#}
{#                                        <option value="RoBERTa hosszú válaszos, nem megválaszolható modell">RoBERTa hosszú válaszos, nem megválaszolható modell</option>#}
{#                                    {% endif %}#}
{#                                {% endif %}#}
{#                            {% endif %}#}
{#                        {% endif %}#}
{#                    {% endif %}#}
                </select>
            </div>
        </div>
        <div class="form-row mt-4">
            <div class="col-lg-12 text-right">
                <input class="btn btn-primary" type="submit" value="Elküld" />
            </div>
        </div>
    </form>
</div>

{% if data %}
{% for line in data %}

<div id="accordion" class="mb-3">
    <div class="card">
      <div class="card-header" id="headingOne">
          <h5 class="mb-0">
              {% if line.answer != "" %}
              <div>
                  {{line.answer | safe}}
              </div>
              <button class="btn btn-link" data-toggle="collapse" data-target="#collapseOne{{line.id}}" aria-expanded="true" aria-controls="collapseOne">
                  Részletek:
              </button>
              {% else %}
              <div>
                  Nem tudom a választ, sajnálom. :(
              </div>
              {% endif %}
          </h5>
      </div>

      <div id="collapseOne{{line.id}}" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
        <div class="card-body">

            <h5 class="card-title">Eredeti kontextus:</h5>
            <p class="card-text">{{line.official_context[:line.start] | safe}}<span style="background: #006fff2b; font-weight: bold; border-radius: 10px; padding: 4px">{{line.official_context[line.start:line.end] | safe}}</span>{{line.official_context[line.end:] | safe}}</p>

            <h5 class="card-title">Elastic pontszám:</h5>
            <p class="card-text">{{line.elastic_score | safe}}</p>

            <h5 class="card-title">Modell pontszám:</h5>
            <p class="card-text">{{line.model_score | safe}}</p>
        </div>
      </div>
    </div>
  </div>

{% endfor %}
{% endif %}
{% endblock %}

